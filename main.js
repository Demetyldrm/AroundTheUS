!function(){"use strict";class e{constructor(e,t,s,r,n){this._id=e._id,this._name=e.name,this._link=e.link,this._handleImageClick=s,this._cardSelector=t,this._handleCardDelete=r,this._isLiked=e.isLiked,this._handleLikeIcon=n}_setEventListeners(){this._likeButton=this._cardElement.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon(this._id,this._isLiked,this._cardElement,this)})),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._deleteButton.addEventListener("click",(()=>{this._handleCardDelete(this._id,this)})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link,src:this._name})}))}updateLikes(){this._likeButton.classList.toggle("card__like-button_active")}_updateLikesView(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}deleteCard(){this._cardElement.remove(),this._cardElement=null}handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardTitle=this._cardElement.querySelector(".card__subtitle"),this._cardTitle.textContent=this._name,this._likeButton=this._cardElement.querySelector(".card__like-button"),this._updateLikesView(),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._formSelector=e.formSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t,this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)]}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=""}toggleButtonState(){this._hasInvalidInput(this._inputEls)?this._disableButton():this._enableButton()}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetForm(){this._formEl.reset(),this._inputEls.forEach((e=>{this._hideInputError(e)})),this.toggleButtonState()}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close(this._popupElement)})),this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class r extends s{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=s}_getInputValues(){const e={};return this._popupForm.querySelectorAll(".modal__input").forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)}))}}class n{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const o=document.querySelector("#profile-edit-button"),i=document.querySelector(".profile__add-button"),a=document.querySelector("#profile-title-input"),l=document.querySelector("#profile-description-input"),c=document.querySelector("#modal-add-card-button"),d=document.querySelector("#profile-edit-modal").querySelector(".modal__form"),h=document.querySelector("#add-card-modal").querySelector(".modal__form"),u=(document.querySelector(".cards__list"),document.querySelector("#card-delete-form"),document.querySelector("#modal-edit-submit-button")),_=document.querySelector("#avatar-edit-modal"),m=document.querySelector(".profile__avatar-edit-button"),p=_.querySelector(".modal__form"),E=(document.querySelector(".profile__image"),document.querySelector(".modal__button")),S={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:".modal__form"},b=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}async getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}async getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}async editProfile(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}async addNewCard(e,t){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._checkResponse)}async deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}async cardLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}async cardUnlike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}async updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"7c3f5c74-509e-4796-a690-f2cafe6e2b28","Content-Type":"application/json"}}),v=new class{constructor(e){let{name:t,about:s,avatarElement:r}=e;this._title=document.querySelector(t),this._description=document.querySelector(s),this._avatarElement=document.querySelector(r)}getUserInfo(){return{name:this._title.textContent,about:this._description.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._title.textContent=t,this._description.textContent=s}changeAvatar(e){this._avatarElement.src=e}}({name:".profile__title",about:".profile__description",avatarElement:".profile__image"});b.getUserInfo().then((e=>{e&&(v.setUserInfo({name:e.name,about:e.about}),v.changeAvatar(e.avatar))})).catch((e=>console.log("Error loading user info:",e)));const f=t=>{const s=(t=>{console.log("Card Data:",t);const s=new e(t,"#card-template",(e=>{!function(e){k.open(e)}(e)}),((e,s)=>{console.log("Card ID:",t._id||t.id),function(e,t){const s=e._id||e.id;s?(C.setFormSubmitHandler((()=>{b.deleteCard(s).then((()=>{t.deleteCard(),C.close()})).catch(console.error)})),C.open()):console.error("Card ID is undefined or invalid!")}(t,s)}),((e,t,r)=>{!function(e,t,s,r){t?b.cardUnlike(e).then((()=>{r.updateLikes()})).catch(console.error):b.cardLike(e).then((()=>{r.updateLikes()})).catch(console.error)}(e,t,0,s)}));return s.getView()})(t);y.addItem(s)};let y;b.getInitialCards().then((e=>{e&&(y=new n({items:e,renderer:f},".cards__list"),y.renderItems())})).catch((e=>console.log("Error loading initial cards:",e)));const k=new class extends s{constructor(e){super({popupSelector:e}),this._cardImageElement=this._popupElement.querySelector(".modal__image"),this._cardTitleElement=this._popupElement.querySelector(".modal__caption")}open(e){this._cardImageElement.src=e.link,this._cardImageElement.alt=e.name,this._cardTitleElement.textContent=e.name,super.open()}}("#image-modal");k.setEventListeners();const g=new r({popupSelector:"#profile-edit-modal",handleFormSubmit:function(e){console.log("Profile Data Submitted:",e);const t={title:e.title||" Name",description:e.description||" About"};u.textContent="Saving...",b.editProfile({name:t.title,about:t.description}).then((()=>{v.setUserInfo({name:t.title,about:t.description}),g.close()})).catch(console.error).finally((()=>{u.textContent="Save"}))}});g.setEventListeners();const L=new r({popupSelector:"#add-card-modal",handleFormSubmit:function(e){const t=e.title,s=(e.title,e.url);c.textContent="Saving...",b.addNewCard(t,s).then((e=>{f({name:e.name,link:e.link,alt:e.name,_id:e._id}),h.reset(),L.close(),B.resetForm()})).catch(console.error).finally((()=>{c.textContent="Save"}))}});L.setEventListeners();const C=new class extends s{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupElement.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent,this._handleFormSubmit=null}setFormSubmitHandler(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit?this._handleFormSubmit():console.error("Form submit handler is not set.")}))}}({popupSelector:"#delete-card-modal"});C.setEventListeners();const q=new r({popupSelector:"#avatar-edit-modal",handleFormSubmit:function(e){const t=e.avatar;console.log("Changing the avatar with URL:",t),t&&"string"==typeof t&&""!==t.trim()&&(E.textContent="Saving...",b.updateAvatar(t).then((e=>{e.avatar?v.changeAvatar(e.avatar):console.error("Error returning Avatar URL."),q.close(),w.resetForm()})).catch(console.error).finally((()=>{E.textContent="Save"})))}});q.setEventListeners(),o.addEventListener("click",(()=>{const e=v.getUserInfo();console.log(a),I.resetForm(),a.value=e.name,l.value=e.about,g.open()})),i.addEventListener("click",(()=>{L.open(),B.toggleButtonState()})),m.addEventListener("click",(()=>{q.open()}));const I=new t(S,d);I.enableValidation();const B=new t(S,h);B.enableValidation();const w=new t(S,p);w.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwRGVsZXRlQ2FyZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgY2FyZERhdGEsXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlQ2FyZERlbGV0ZSxcbiAgICBoYW5kbGVMaWtlSWNvblxuICApIHtcbiAgICB0aGlzLl9pZCA9IGNhcmREYXRhLl9pZDtcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7XG4gICAgdGhpcy5faXNMaWtlZCA9IGNhcmREYXRhLmlzTGlrZWQ7XG4gICAgdGhpcy5faGFuZGxlTGlrZUljb24gPSBoYW5kbGVMaWtlSWNvbjtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbih0aGlzLl9pZCwgdGhpcy5faXNMaWtlZCwgdGhpcy5fY2FyZEVsZW1lbnQsIHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlKHRoaXMuX2lkLCB0aGlzKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soe1xuICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxuICAgICAgICBsaW5rOiB0aGlzLl9saW5rLFxuICAgICAgICBzcmM6IHRoaXMuX25hbWUsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZUxpa2VzKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF91cGRhdGVMaWtlc1ZpZXcoKSB7XG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3N1YnRpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fdXBkYXRlTGlrZXNWaWV3KCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsKSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbDtcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgLy9mb3IgdGhlIHJldmlld2VyOiBJIG1hZGUgc29tZSBtZXRob2RzIHByaXZhdGUuIEJ1dCBJIGdldCBhbiBlcnJvciBtZXNzYWdlIHdoZW4gdG9nZ2xlQnV0dG9uU3RhdGUgbWV0aG9kIGlzIHB1YmxpYy5cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgfVxuXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRGb3JtKCkge1xuICAgIHRoaXMuX2Zvcm1FbC5yZXNldCgpO1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0pO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UodGhpcy5fcG9wdXBFbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICBjb25zdCBpbnB1dFZhbHVlTGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICBpbnB1dFZhbHVlTGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG5cbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2xhc3NTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsYXNzU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFbGVtZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZFN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI21vZGFsLWFkZC1jYXJkLWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmV4cG9ydCBjb25zdCBkZWxldGVDYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1kZWxldGUtZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlU3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjbW9kYWwtZWRpdC1zdWJtaXQtYnV0dG9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBhdmF0YXJFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1lZGl0LW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucHJvZmlsZV9fYXZhdGFyLWVkaXQtYnV0dG9uXCJcbik7XG5leHBvcnQgY29uc3QgYXZhdGFyRWRpdEZvcm1FbGVtZW50ID1cbiAgYXZhdGFyRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhclNhdmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG5cbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG59O1xuIiwiLy8gaW5kZXguanNcblxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IFBvcHVwRGVsZXRlQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cERlbGV0ZUNhcmQuanNcIjtcbmltcG9ydCB7XG4gIHByb2ZpbGVFZGl0Rm9ybSxcbiAgc2V0dGluZ3MsXG4gIGF2YXRhckVkaXRGb3JtRWxlbWVudCxcbiAgYWRkQ2FyZEZvcm1FbGVtZW50LFxuICBhZGRDYXJkU3VibWl0QnV0dG9uLFxuICBwcm9maWxlQXZhdGFyRWRpdEJ1dHRvbixcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGFkZE5ld0NhcmRCdXR0b24sXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcbiAgZGVsZXRlQ2FyZEVsZW1lbnQsXG4gIGF2YXRhclNhdmVCdXR0b24sXG4gIHByb2ZpbGVTdWJtaXRCdXR0b24sXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQVBJIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiN2MzZjVjNzQtNTA5ZS00Nzk2LWE2OTAtZjJjYWZlNmUyYjI4XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gVXNlciBJbmZvIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZTogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgYWJvdXQ6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGF2YXRhckVsZW1lbnQ6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXG59KTtcblxuYXBpXG4gIC5nZXRVc2VySW5mbygpXG4gIC50aGVuKChwcm9maWxlRGF0YSkgPT4ge1xuICAgIGlmIChwcm9maWxlRGF0YSkge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgICBuYW1lOiBwcm9maWxlRGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogcHJvZmlsZURhdGEuYWJvdXQsXG4gICAgICB9KTtcbiAgICAgIHVzZXJJbmZvLmNoYW5nZUF2YXRhcihwcm9maWxlRGF0YS5hdmF0YXIpO1xuICAgIH1cbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKFwiRXJyb3IgbG9hZGluZyB1c2VyIGluZm86XCIsIGVycikpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDYXJkcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoY2FyZERhdGEpID0+IHtcbiAgY29uc29sZS5sb2coXCJDYXJkIERhdGE6XCIsIGNhcmREYXRhKTtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGNhcmREYXRhLFxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICAoY2FyZERhdGEpID0+IHtcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpO1xuICAgIH0sXG4gICAgKGNhcmRJZCwgY2FyZCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJDYXJkIElEOlwiLCBjYXJkRGF0YS5faWQgfHwgY2FyZERhdGEuaWQpO1xuICAgICAgaGFuZGxlRGVsZXRlTW9kYWwoY2FyZERhdGEsIGNhcmQpO1xuICAgIH0sXG4gICAgKGNhcmRJZCwgaXNMaWtlZCwgY2FyZEVsZW1lbnQpID0+IHtcbiAgICAgIGhhbmRsZUxpa2VDbGljayhjYXJkSWQsIGlzTGlrZWQsIGNhcmRFbGVtZW50LCBjYXJkKTtcbiAgICB9XG4gICk7XG5cbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufTtcblxuLy8gRnVuY3Rpb24gdG8gcmVuZGVyIGEgY2FyZFxuY29uc3QgcmVuZGVyQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xuICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gIHNlY3Rpb24uYWRkSXRlbShjYXJkKTtcbn07XG5cbi8vIERlY2xhcmUgc2VjdGlvbiB2YXJpYWJsZVxubGV0IHNlY3Rpb247XG5cbi8vIEZldGNoaW5nIHRoZSBpbml0aWFsIGNhcmRzXG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChjYXJkRGF0YSkgPT4ge1xuICAgIGlmIChjYXJkRGF0YSkge1xuICAgICAgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAgICB7XG4gICAgICAgICAgaXRlbXM6IGNhcmREYXRhLFxuICAgICAgICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxuICAgICAgICB9LFxuICAgICAgICBcIi5jYXJkc19fbGlzdFwiXG4gICAgICApO1xuICAgICAgc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuICAgIH1cbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKFwiRXJyb3IgbG9hZGluZyBpbml0aWFsIGNhcmRzOlwiLCBlcnIpKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gUG9wdXBzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy8gSW1hZ2UgcHJldmlldyBwb3B1cFxuY29uc3QgbmV3SW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1tb2RhbFwiKTtcbm5ld0ltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gRWRpdCBwcm9maWxlIHBvcHVwXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQsXG59KTtcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gQWRkIG5ldyBjYXJkIHBvcHVwXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IGhhbmRsZUFkZENhcmRGb3JtU3VibWl0LFxufSk7XG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gRGVsZXRlIGNhcmQgY29uZmlybWF0aW9uIHBvcHVwXG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBEZWxldGVDYXJkKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjZGVsZXRlLWNhcmQtbW9kYWxcIixcbn0pO1xuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEVkaXQgYXZhdGFyIHBvcHVwXG5jb25zdCBhdmF0YXJFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI2F2YXRhci1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IGhhbmRsZUF2YXRhckVkaXRTdWJtaXQsXG59KTtcbmF2YXRhckVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFdmVudCBIYW5kbGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KHByb2ZpbGVEYXRhKSB7XG4gIGNvbnNvbGUubG9nKFwiUHJvZmlsZSBEYXRhIFN1Ym1pdHRlZDpcIiwgcHJvZmlsZURhdGEpO1xuXG4gIGNvbnN0IHByb2Nlc3NlZFByb2ZpbGVEYXRhID0ge1xuICAgIHRpdGxlOiBwcm9maWxlRGF0YS50aXRsZSB8fCBcIiBOYW1lXCIsXG4gICAgZGVzY3JpcHRpb246IHByb2ZpbGVEYXRhLmRlc2NyaXB0aW9uIHx8IFwiIEFib3V0XCIsXG4gIH07XG5cbiAgcHJvZmlsZVN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gIGFwaVxuICAgIC5lZGl0UHJvZmlsZSh7XG4gICAgICBuYW1lOiBwcm9jZXNzZWRQcm9maWxlRGF0YS50aXRsZSxcbiAgICAgIGFib3V0OiBwcm9jZXNzZWRQcm9maWxlRGF0YS5kZXNjcmlwdGlvbixcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgICAgbmFtZTogcHJvY2Vzc2VkUHJvZmlsZURhdGEudGl0bGUsXG4gICAgICAgIGFib3V0OiBwcm9jZXNzZWRQcm9maWxlRGF0YS5kZXNjcmlwdGlvbixcbiAgICAgIH0pO1xuICAgICAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcHJvZmlsZVN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChuZXdDYXJkRGF0YSkge1xuICBjb25zdCBuYW1lID0gbmV3Q2FyZERhdGEudGl0bGU7XG4gIGNvbnN0IGFsdCA9IG5ld0NhcmREYXRhLnRpdGxlO1xuICBjb25zdCBsaW5rID0gbmV3Q2FyZERhdGEudXJsO1xuXG4gIGFkZENhcmRTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuXG4gIGFwaVxuICAgIC5hZGROZXdDYXJkKG5hbWUsIGxpbmspXG4gICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgICByZW5kZXJDYXJkKHtcbiAgICAgICAgbmFtZTogY2FyZERhdGEubmFtZSxcbiAgICAgICAgbGluazogY2FyZERhdGEubGluayxcbiAgICAgICAgYWx0OiBjYXJkRGF0YS5uYW1lLFxuICAgICAgICBfaWQ6IGNhcmREYXRhLl9pZCxcbiAgICAgIH0pO1xuICAgICAgYWRkQ2FyZEZvcm1FbGVtZW50LnJlc2V0KCk7XG5cbiAgICAgIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xuICAgICAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXRGb3JtKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhZGRDYXJkU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpIHtcbiAgbmV3SW1hZ2VQb3B1cC5vcGVuKGNhcmREYXRhKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlTW9kYWwoY2FyZERhdGEsIGNhcmQpIHtcbiAgY29uc3QgY2FyZElkID0gY2FyZERhdGEuX2lkIHx8IGNhcmREYXRhLmlkO1xuXG4gIGlmICghY2FyZElkKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkNhcmQgSUQgaXMgdW5kZWZpbmVkIG9yIGludmFsaWQhXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGRlbGV0ZUNhcmRQb3B1cC5zZXRGb3JtU3VibWl0SGFuZGxlcigoKSA9PiB7XG4gICAgYXBpXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkSWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH0pO1xuXG4gIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkSWQsIGlzTGlrZWQsIGNhcmRFbGVtZW50LCBjYXJkKSB7XG4gIGlmIChpc0xpa2VkKSB7XG4gICAgYXBpXG4gICAgICAuY2FyZFVubGlrZShjYXJkSWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQudXBkYXRlTGlrZXMoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH0gZWxzZSB7XG4gICAgYXBpXG4gICAgICAuY2FyZExpa2UoY2FyZElkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLnVwZGF0ZUxpa2VzKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9XG59XG4vLyBmb3IgdGhlIHJldmlld2VyOiBUaGUgcmVzZXQgZm9ybSBpcyBwbGFjZWQgaW5zaWRlIHRoZSB0aGVuIGJsb2NrLlxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyRWRpdFN1Ym1pdChpbnB1dFZhbHVlcykge1xuICBjb25zdCBhdmF0YXJVcmwgPSBpbnB1dFZhbHVlcy5hdmF0YXI7XG5cbiAgY29uc29sZS5sb2coXCJDaGFuZ2luZyB0aGUgYXZhdGFyIHdpdGggVVJMOlwiLCBhdmF0YXJVcmwpO1xuXG4gIGlmICghYXZhdGFyVXJsIHx8IHR5cGVvZiBhdmF0YXJVcmwgIT09IFwic3RyaW5nXCIgfHwgYXZhdGFyVXJsLnRyaW0oKSA9PT0gXCJcIikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGF2YXRhclNhdmVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuXG4gIGFwaVxuICAgIC51cGRhdGVBdmF0YXIoYXZhdGFyVXJsKVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgaWYgKHVzZXJEYXRhLmF2YXRhcikge1xuICAgICAgICB1c2VySW5mby5jaGFuZ2VBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXR1cm5pbmcgQXZhdGFyIFVSTC5cIik7XG4gICAgICB9XG5cbiAgICAgIGF2YXRhckVkaXRQb3B1cC5jbG9zZSgpO1xuICAgICAgYXZhdGFyRm9ybVZhbGlkYXRvci5yZXNldEZvcm0oKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGF2YXRhclNhdmVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcbiAgICB9KTtcbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRXZlbnQgTGlzdGVuZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy8gRWRpdCBQcm9maWxlIGJ1dHRvblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgdXNlcklucHV0ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcblxuICBjb25zb2xlLmxvZyhwcm9maWxlVGl0bGVJbnB1dCk7XG4gIHByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvci5yZXNldEZvcm0oKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VySW5wdXQubmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VySW5wdXQuYWJvdXQ7XG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufSk7XG5cbi8vIEFkZCBuZXcgY2FyZCBidXR0b25cbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn0pO1xuXG4vLyBPcGVuIHRoZSBhdmF0YXIgZWRpdCBtb2RhbFxucHJvZmlsZUF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYXZhdGFyRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBGb3JtIFZhbGlkYXRvcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vLyBJbml0aWFsaXplIGZvcm0gdmFsaWRhdG9yc1xuY29uc3QgcHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIHByb2ZpbGVFZGl0Rm9ybSk7XG5wcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhZGRDYXJkRm9ybUVsZW1lbnQpO1xuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGF2YXRhckVkaXRGb3JtRWxlbWVudCk7XG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIGFzeW5jIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBhc3luYyBlZGl0UHJvZmlsZSh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBhc3luYyBhZGROZXdDYXJkKHRpdGxlLCBsaW5rKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IHRpdGxlLFxuICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGFzeW5jIGNhcmRMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBhc3luYyBjYXJkVW5saWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVBdmF0YXIoYXZhdGFyVXJsKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJVcmwsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgYWJvdXQsIGF2YXRhckVsZW1lbnQgfSkge1xuICAgIHRoaXMuX3RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXQpO1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhckVsZW1lbnQpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX3RpdGxlLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxuXG4gIGNoYW5nZUF2YXRhcihhdmF0YXIpIHtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhcjtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudCA9XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBEZWxldGVDYXJkIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IG51bGw7XG4gIH1cblxuICBzZXRGb3JtU3VibWl0SGFuZGxlcihoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAodGhpcy5faGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRm9ybSBzdWJtaXQgaGFuZGxlciBpcyBub3Qgc2V0LlwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImNhcmREYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZUNhcmREZWxldGUiLCJoYW5kbGVMaWtlSWNvbiIsInRoaXMiLCJfaWQiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9pc0xpa2VkIiwiaXNMaWtlZCIsIl9oYW5kbGVMaWtlSWNvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZGVsZXRlQnV0dG9uIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJzcmMiLCJ1cGRhdGVMaWtlcyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl91cGRhdGVMaWtlc1ZpZXciLCJhZGQiLCJyZW1vdmUiLCJkZWxldGVDYXJkIiwiZ2V0VmlldyIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImFsdCIsIl9jYXJkVGl0bGUiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsIiwiX2lucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZUJ1dHRvbiIsIl9lbmFibGVCdXR0b24iLCJpbnB1dExpc3QiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0Rm9ybSIsInJlc2V0IiwiUG9wdXAiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiZSIsIlNlY3Rpb24iLCJjbGFzc1NlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImFkZE5ld0NhcmRCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiYWRkQ2FyZFN1Ym1pdEJ1dHRvbiIsInByb2ZpbGVFZGl0Rm9ybSIsImFkZENhcmRGb3JtRWxlbWVudCIsInByb2ZpbGVTdWJtaXRCdXR0b24iLCJhdmF0YXJFZGl0TW9kYWwiLCJwcm9maWxlQXZhdGFyRWRpdEJ1dHRvbiIsImF2YXRhckVkaXRGb3JtRWxlbWVudCIsImF2YXRhclNhdmVCdXR0b24iLCJhcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJnZXRJbml0aWFsQ2FyZHMiLCJlZGl0UHJvZmlsZSIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGROZXdDYXJkIiwidGl0bGUiLCJjYXJkSWQiLCJjYXJkTGlrZSIsImNhcmRVbmxpa2UiLCJ1cGRhdGVBdmF0YXIiLCJhdmF0YXJVcmwiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJhdmF0YXJFbGVtZW50IiwiX3RpdGxlIiwiX2Rlc2NyaXB0aW9uIiwiX2F2YXRhckVsZW1lbnQiLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwiY2hhbmdlQXZhdGFyIiwicHJvZmlsZURhdGEiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJyZW5kZXJDYXJkIiwiY2FyZCIsIm5ld0ltYWdlUG9wdXAiLCJkZWxldGVDYXJkUG9wdXAiLCJzZXRGb3JtU3VibWl0SGFuZGxlciIsImVycm9yIiwiaGFuZGxlRGVsZXRlTW9kYWwiLCJjYXJkRWxlbWVudCIsImhhbmRsZUxpa2VDbGljayIsImNyZWF0ZUNhcmQiLCJzZWN0aW9uIiwiX2NhcmRUaXRsZUVsZW1lbnQiLCJkYXRhIiwiZWRpdFByb2ZpbGVQb3B1cCIsInByb2Nlc3NlZFByb2ZpbGVEYXRhIiwiZGVzY3JpcHRpb24iLCJmaW5hbGx5IiwibmV3Q2FyZFBvcHVwIiwibmV3Q2FyZERhdGEiLCJ1cmwiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsIl9zdWJtaXRCdXR0b25UZXh0IiwiYXZhdGFyRWRpdFBvcHVwIiwidHJpbSIsInVzZXJEYXRhIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsInVzZXJJbnB1dCIsInByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=